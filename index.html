<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gemini Prompt Optimizer v3.1</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --obsidian: #05070a;
            --glass: rgba(15, 20, 28, 0.7);
            --neon-cyan: #00f2ff;
            --neon-purple: #bc13fe;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--obsidian);
            background-image: radial-gradient(circle at 10% 20%, rgba(0, 242, 255, 0.05) 0%, transparent 40%);
            color: #e2e8f0;
        }

        .glass-panel {
            background: var(--glass);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .neon-button {
            background: linear-gradient(135deg, var(--neon-cyan), var(--neon-purple));
            transition: all 0.3s ease;
        }

        .neon-button:hover {
            box-shadow: 0 0 25px rgba(0, 242, 255, 0.4);
            transform: translateY(-1px);
        }

        textarea, input, select {
            background: rgba(0, 0, 0, 0.4) !important;
            border: 1px solid rgba(255, 255, 255, 0.1) !important;
            color: #fff !important;
        }

        textarea:focus { border-color: var(--neon-cyan) !important; outline: none; }

        .custom-scrollbar::-webkit-scrollbar { width: 4px; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: rgba(0, 242, 255, 0.3); border-radius: 10px; }
    </style>
</head>
<body class="min-h-screen p-4 lg:p-8">
    <div class="max-w-[1500px] mx-auto">
        <!-- Header -->
        <header class="flex flex-col md:flex-row justify-between items-center mb-8 gap-4">
            <div class="flex items-center gap-4">
                <div class="w-10 h-10 rounded-lg bg-cyan-500 flex items-center justify-center font-bold text-black italic">G3</div>
                <h1 class="text-xl font-extrabold uppercase tracking-tighter">Gemini <span class="text-cyan-400">Optimizer</span></h1>
            </div>
            <div class="flex gap-3">
                <button onclick="loadShuffleDemo()" class="px-4 py-2 border border-cyan-500/30 rounded-lg text-[10px] font-bold uppercase tracking-widest text-cyan-400 hover:bg-cyan-500/10 transition-all">
                    Shuffle Strategy Demo
                </button>
            </div>
        </header>

        <div class="grid grid-cols-1 xl:grid-cols-12 gap-8">
            <!-- Sidebar: Parameters -->
            <aside class="xl:col-span-4 space-y-6">
                <div class="glass-panel rounded-3xl p-6 space-y-5">
                    <div>
                        <label class="text-[10px] font-black text-slate-500 uppercase tracking-[0.2em] mb-2 block">1. 角色定義 (Role)</label>
                        <input id="personaInput" type="text" class="w-full px-4 py-2 rounded-xl text-sm" placeholder="例如：資深 Java 軟體工程師">
                    </div>

                    <div>
                        <label class="text-[10px] font-black text-slate-500 uppercase tracking-[0.2em] mb-2 block">2. 背景脈絡 (Context / Knowledge)</label>
                        <textarea id="contextInput" class="w-full px-4 py-2 rounded-xl text-sm h-32 custom-scrollbar" placeholder="貼入相關文件、程式碼或數據..."></textarea>
                    </div>

                    <div>
                        <label class="text-[10px] font-black text-slate-500 uppercase tracking-[0.2em] mb-2 block">3. 執行任務 (Task)</label>
                        <textarea id="taskInput" class="w-full px-4 py-2 rounded-xl text-sm h-20" placeholder="模型需要完成什麼？"></textarea>
                    </div>

                    <div>
                        <label class="text-[10px] font-black text-slate-500 uppercase tracking-[0.2em] mb-2 block">4. 少量樣本 (Few-shot Patterns)</label>
                        <textarea id="examplesInput" class="w-full px-4 py-2 rounded-xl text-xs font-mono h-24 custom-scrollbar" placeholder="Input: ... \nOutput: ..."></textarea>
                    </div>

                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="text-[10px] font-black text-slate-500 uppercase tracking-[0.2em] mb-2 block">輸出格式</label>
                            <select id="formatInput" class="w-full px-3 py-2 rounded-xl text-xs">
                                <option value="Markdown">Markdown</option>
                                <option value="JSON">JSON Object</option>
                                <option value="Table">Table / Grid</option>
                                <option value="Bullet Points">List / Bullets</option>
                            </select>
                        </div>
                        <div>
                            <label class="text-[10px] font-black text-slate-500 uppercase tracking-[0.2em] mb-2 block">推理模式</label>
                            <select id="logicInput" class="w-full px-3 py-2 rounded-xl text-xs">
                                <option value="direct">直接回答 (Standard)</option>
                                <option value="plan">明確規劃 (Step-by-step)</option>
                                <option value="agentic">代理推理 (Agentic)</option>
                            </select>
                        </div>
                    </div>

                    <button onclick="compilePrompt()" class="neon-button w-full py-4 rounded-2xl text-xs font-black uppercase tracking-widest text-white mt-4">
                        Compile Optimized Prompt
                    </button>
                </div>
            </aside>

            <!-- Main: Terminal Output -->
            <main class="xl:col-span-8 flex flex-col gap-6">
                <div class="glass-panel rounded-3xl p-6 flex-grow flex flex-col min-h-[600px]">
                    <div class="flex justify-between items-center mb-4">
                        <div class="flex gap-2 text-[10px] font-bold text-slate-500">
                            <span class="text-cyan-400">STATUS: READY</span>
                            <span class="opacity-30">|</span>
                            <span>GEMINI_V3_PROTOCOLS</span>
                        </div>
                        <button onclick="copyOutput()" class="text-[10px] font-black uppercase border border-slate-700 px-3 py-1 rounded hover:border-cyan-500 transition-all">Copy Result</button>
                    </div>
                    
                    <div id="terminal" class="bg-black/40 rounded-2xl p-6 flex-grow font-mono text-sm text-cyan-50/80 overflow-y-auto whitespace-pre-wrap custom-scrollbar border border-white/5">
// 系統初始化中...
// 請點擊左側範例或輸入內容後按下「Compile Optimized Prompt」
                    </div>
                </div>

                <!-- Strategic Stats -->
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <div class="glass-panel p-4 rounded-2xl border-l-4 border-cyan-500">
                        <p class="text-[9px] font-bold text-slate-500 uppercase">當前時間</p>
                        <p class="text-sm font-bold">2025-12-24</p>
                    </div>
                    <div class="glass-panel p-4 rounded-2xl border-l-4 border-purple-500">
                        <p class="text-[9px] font-bold text-slate-500 uppercase">知識截止</p>
                        <p class="text-sm font-bold">2025-01</p>
                    </div>
                    <div class="glass-panel p-4 rounded-2xl border-l-4 border-green-500">
                        <p class="text-[9px] font-bold text-slate-500 uppercase">推理強度</p>
                        <p id="logicStat" class="text-sm font-bold">LOW_LATENCY</p>
                    </div>
                    <div class="glass-panel p-4 rounded-2xl border-l-4 border-yellow-500">
                        <p class="text-[9px] font-bold text-slate-500 uppercase">格式屏蔽</p>
                        <p class="text-sm font-bold">XML_ENABLED</p>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <script>
        const demoVault = [
            {
                role: "產品分類專家 (Categorization Expert)",
                context: "待分類項目列表：\n1. 大象\n2. 螞蟻\n3. 藍鯨\n4. 蜂鳥",
                task: "將這些動物分類為 [巨大, 微小]。",
                examples: "Input: Elephant\nOutput: 巨大\n\nInput: Ant\nOutput: 微小",
                format: "Table",
                logic: "direct"
            },
            {
                role: "JSON 格式轉換器 (JSON Structurizer)",
                context: "訂單內容：我要一份漢堡、兩份大薯、一杯可樂。",
                task: "將訂單轉換為 JSON 物件，僅包含品項與數量。若未點購的品項請省略。",
                examples: "Order: A burger and a drink.\nOutput: {\"hamburger\": 1, \"drink\": 1}",
                format: "JSON",
                logic: "agentic"
            },
            {
                role: "資深軟體架構師 (Senior Solution Architect)",
                context: "遺留系統代碼：\nvar x = 10; \nfunction sum(a,b) { return a+b; }",
                task: "請將這段代碼遷移至 TypeScript 5.0 並使用箭頭函式。分析並給出重構建議。",
                examples: "",
                format: "Markdown",
                logic: "plan"
            }
        ];

        function loadShuffleDemo() {
            const demo = demoVault[Math.floor(Math.random() * demoVault.length)];
            document.getElementById('personaInput').value = demo.role;
            document.getElementById('contextInput').value = demo.context;
            document.getElementById('taskInput').value = demo.task;
            document.getElementById('examplesInput').value = demo.examples;
            document.getElementById('formatInput').value = demo.format;
            document.getElementById('logicInput').value = demo.logic;
            compilePrompt();
        }

        function compilePrompt() {
            const role = document.getElementById('personaInput').value;
            const context = document.getElementById('contextInput').value;
            const task = document.getElementById('taskInput').value;
            const examples = document.getElementById('examplesInput').value;
            const format = document.getElementById('formatInput').value;
            const logic = document.getElementById('logicInput').value;

            if (!task) return alert("請至少輸入執行的任務。");

            document.getElementById('logicStat').textContent = logic.toUpperCase();

            let prompt = `// SYSTEM_DATE: 2025-12-24\n// KNOWLEDGE_CUTOFF: 2025-01\n\n`;

            // 1. Role System Instruction
            if (role) {
                prompt += `<role>\nYou are a ${role}.\n</role>\n\n`;
            }

            // 2. Core Constraints & Logic Engine
            prompt += `<instructions>\n`;
            prompt += `- Current Year: 2025 (Crucial for time-sensitive queries).\n`;
            prompt += `- Knowledge Cutoff: Jan 2025.\n`;
            prompt += `- Language: Traditional Chinese (繁體中文).\n`;
            prompt += `- Formatting: ${format}.\n`;

            if (logic === 'plan') {
                prompt += `- Reasoning: You must create a STEP-BY-STEP PLAN before providing the final answer.\n`;
            } else if (logic === 'agentic') {
                prompt += `- Reasoning: Act as a STRONG REASONER. Analyze logical dependencies, assess risks, and use abductive reasoning before responding.\n`;
            }
            
            // Grounding reinforcement if context is present
            if (context) {
                prompt += `- Grounding: You are a strictly grounded assistant. Rely ONLY on the information provided in the <context> tag. If the information is missing, state that it is not available.\n`;
            }
            prompt += `</instructions>\n\n`;

            // 3. Examples (Few-shot)
            if (examples) {
                prompt += `<examples>\n${examples}\n</examples>\n\n`;
            }

            // 4. Context (Data)
            if (context) {
                prompt += `<context>\n${context}\n</context>\n\n`;
            }

            // 5. Final Task
            prompt += `<task>\n${task}\n</task>\n\n`;

            // 6. Output Prefixing
            if (format === 'JSON') {
                prompt += `Output strictly in JSON format:`;
            } else if (format === 'Table') {
                prompt += `Output as a Markdown Table:`;
            } else {
                prompt += `Final Response:`;
            }

            document.getElementById('terminal').textContent = prompt;
        }

        function copyOutput() {
            const text = document.getElementById('terminal').textContent;
            navigator.clipboard.writeText(text).then(() => {
                const btn = event.target;
                const originalText = btn.textContent;
                btn.textContent = "COPIED!";
                setTimeout(() => btn.textContent = originalText, 2000);
            });
        }
    </script>
</body>
</html>
